<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>shopify.friend documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Shopify 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="shopify.auth.html"><span>shopify.auth</span></a></li><li class="current"><a href="shopify.friend.html"><span>shopify.friend</span></a></li><li><a href="shopify.resources.html"><span>shopify.resources</span></a></li><li><a href="shopify.resources.client.html"><span>shopify.resources.client</span></a></li><li><a href="shopify.resources.names.html"><span>shopify.resources.names</span></a></li><li><a href="shopify.resources.routes.html"><span>shopify.resources.routes</span></a></li><li><a href="shopify.util.html"><span>shopify.util</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="shopify.friend.html#var-build-access-token-request"><span>build-access-token-request</span></a></li><li><a href="shopify.friend.html#var-callback-request-matcher"><span>callback-request-matcher</span></a></li><li><a href="shopify.friend.html#var-fetch-access-token"><span>fetch-access-token</span></a></li><li><a href="shopify.friend.html#var-handle-callback-request"><span>handle-callback-request</span></a></li><li><a href="shopify.friend.html#var-handle-login-request"><span>handle-login-request</span></a></li><li><a href="shopify.friend.html#var-login-request-matcher"><span>login-request-matcher</span></a></li><li><a href="shopify.friend.html#var-normalize-shop-domain"><span>normalize-shop-domain</span></a></li><li><a href="shopify.friend.html#var-user-auth-url"><span>user-auth-url</span></a></li><li><a href="shopify.friend.html#var-workflow"><span>workflow</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>shopify.friend documentation</h2><pre class="doc">Provides a workflow for [friend](https://github.com/cemerick/friend).
</pre><div class="public" id="var-build-access-token-request"><h3>build-access-token-request</h3><div class="usage"><code>(build-access-token-request api-client shop code)</code></div><pre class="doc">Takes an api-client map, a myshopify domain, and a temporary code.
Returns a request map for a POST to Shopify to get a permanent token</pre></div><div class="public" id="var-callback-request-matcher"><h3>callback-request-matcher</h3><div class="usage"><code>(callback-request-matcher callback-path request)</code></div><pre class="doc">Returns whether or not the request is an auth callback, for a given
callback path.</pre></div><div class="public" id="var-fetch-access-token"><h3>fetch-access-token</h3><div class="usage"><code>(fetch-access-token api-client shop code)</code></div><pre class="doc">Takes an api-client map, a myshopify domain, and a temporary access code.
Fires off a POST to Shopify requesting a permanent token, which is
then returned.</pre></div><div class="public" id="var-handle-callback-request"><h3>handle-callback-request</h3><div class="usage"><code>(handle-callback-request api-client request)</code></div><pre class="doc">Uses the temporary code from an auth callback to fetch a permanent
access token from Shopify and return it in an auth map.</pre></div><div class="public" id="var-handle-login-request"><h3>handle-login-request</h3><div class="usage"><code>(handle-login-request api-client request callback-path)</code></div><pre class="doc">Returns a redirect response to the user auth URL for the shop
specified in the query params.</pre></div><div class="public" id="var-login-request-matcher"><h3>login-request-matcher</h3><div class="usage"><code>(login-request-matcher login-path request)</code></div><pre class="doc">Returns whether or not the request is a login, for a given login path.
</pre></div><div class="public" id="var-normalize-shop-domain"><h3>normalize-shop-domain</h3><div class="usage"><code>(normalize-shop-domain domain)</code></div><pre class="doc">Puts in the .myshopify.com if necessary.
</pre></div><div class="public" id="var-user-auth-url"><h3>user-auth-url</h3><div class="usage"><code>(user-auth-url api-client shop &amp; [redirect-path])</code></div><pre class="doc">Takes an api-client map, a shop domain, and a redirect path and returns
the URL where the user can grant access the api-client.</pre></div><div class="public" id="var-workflow"><h3>workflow</h3><div class="usage"><code>(workflow {:keys [api-client], :as config})</code></div><pre class="doc">Takes a config map and returns a friend workflow. The only required
config key is `:api-client`. Optional keys are `:login-path` (defaults to
&quot;/auth/shopify&quot;) and `:callback-path` (defaults to
&quot;/auth/shopify/callback&quot;). Here's a typical config:

    {:api-client
     {:url &quot;http://myapp.com&quot;
      :key &quot;01abfc750a0c942167651c40d088531d&quot;
      :secret &quot;dc2e817cb95adce7164db4767a13a53f&quot;
      :scope [:read_orders, :write_content]}
     :login-path &quot;/login&quot;}</pre></div></div></body></html>